<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Prompt Science ‚Äî Podcast</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Inter', sans-serif;
      background-color: #eceef2;
      color: #0f172a;
      overflow-x: hidden;
    }
    canvas { position: fixed; top: 0; left: 0; z-index: 0; }
    header {
      background: transparent;
      padding: 3rem 1rem 1rem;
      text-align: center;
      position: relative;
      z-index: 2;
    }
    header h1 { margin: 0; font-size: 2.5rem; color: #157aa5; }
    header p { margin-top: 0.5rem; color: #475569; font-size: 1.1rem; }
    .top-cta { margin-top: 1rem; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
    .chip {
      background: #38bdf8; color: #0f172a; padding: 0.5rem 0.9rem; border-radius: 999px; font-weight: 600; text-decoration: none;
      box-shadow: 0 1px 0 rgba(0,0,0,.05);
    }
    .chip:hover { background:#0ea5e9; }
    .tabs {
      max-width: 1000px; margin: 2rem auto; padding: 0 1rem; position: relative; z-index: 2;
    }
    .tab-buttons {
      display: flex; flex-wrap: wrap; background: #f1f5f9; border-radius: 6px; overflow: hidden;
    }
    .tab-buttons button {
      flex: 1; background: none; border: none; padding: 1rem; cursor: pointer; font-weight: 600; color: #1e293b;
      transition: all 0.3s ease;
    }
    .tab-buttons button:hover { background: #1e293b; color: white; }
    .tab-buttons button.active { background: #38bdf8; color: #0f172a; }
    .tab-content {
      display: none; background: #f1f5f9; padding: 2rem; margin-top: 1rem; border-radius: 6px;
    }
    .tab-content.active { display: block; }
    .episodes-grid {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 1rem;
    }
    .episode-card {
      background: #fff; border-radius: 8px; padding: 1rem; box-shadow: 0 1px 2px rgba(0,0,0,.05);
      display: flex; flex-direction: column; gap: .5rem;
    }
    .episode-card h3 { margin: 0 0 .25rem 0; font-size: 1.05rem; color:#0f172a; }
    .meta { font-size: .85rem; color:#64748b; }
    audio { width: 100%; margin-top: .5rem; }
    .button-link {
      display: inline-block; background-color: #38bdf8; color: #0f172a; padding: 0.6rem 1rem; font-weight: 600;
      text-decoration: none; border-radius: 6px; margin-top: .5rem;
    }
    .button-link:hover { background-color: #0ea5e9; }
    .section { max-width: 800px; margin: 0 auto 1.2rem; background: #fff; padding: 1.2rem; border-radius: 8px; box-shadow: 0 1px 2px rgba(0,0,0,.05); }
    .kbd { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; background:#c1c8d1; padding: .1em .35em; border-radius: 4px; }
    ul { padding-left: 1.3rem; }
    footer {
      text-align: center; font-size: 0.85rem; color: #64748b; margin: 4rem 0 2rem 0; position: relative; z-index: 2;
    }
    .pill { display:inline-block; font-size:.8rem; padding:.15rem .5rem; border-radius:999px; background:#e2e8f0; color:#0f172a; }
    .rss-box { display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; }
    .input-like { background:#fff; border:1px solid #cbd5e1; padding:.5rem .6rem; border-radius:6px; font-size:.9rem; }
    .small { font-size:.9rem; color:#475569; }
    .muted { color:#64748b; }
    details summary { cursor: pointer; font-weight: 600; }
  </style>
</head>
<body>

<canvas id="background"></canvas>

<header>
  <h1>Prompt Science</h1>
  <p>AI, research, and the frontiers of discovery ‚Äî a community-audited podcast.</p>
  <div class="top-cta">
   <!-- <a id="rssLinkTop" class="chip" href="#" target="_blank">RSS Feed</a> -->
    <a id="repoLinkTop" class="chip" href="#" target="_blank">GitHub</a>
    <a class="chip" href="https://x.com/prompt_science" target="_blank">ùïè / Twitter</a>
    <a class="chip" href="#listen" onclick="openTab('listen')">‚ñ∂Ô∏é Listen</a>
  </div>
</header>

<div class="tabs">
  <div class="tab-buttons">
    <button class="active" onclick="openTab('listen')">Listen</button>
    <button onclick="openTab('about')">About</button>
    <button onclick="openTab('how')">How it works</button>
    <button onclick="openTab('contribute')">Contribute</button>
    <button onclick="openTab('submit')">Submit corrections</button>
    <button onclick="openTab('contact')">Contact</button>
  </div>

  <!-- LISTEN -->
  <div id="listen" class="tab-content active">
    <h2 id="listenTitle">Episodes</h2>
    <p class="small muted">New episodes weekly. Audio files are hosted in <span class="kbd">/episodes</span>. This list can auto-load from <span class="kbd">episodes/episodes.json</span>.</p>
    <div id="episodes" class="episodes-grid"></div>

    <div class="section">
      <h3>Subscribe</h3>
      <div class="rss-box">
        <span class="input-like" id="rssValue">https://github.com/napoles-uach/promptscience/feeds/podcast.rss</span>
        <a class="button-link" id="rssLink" href="#" target="_blank">Open RSS</a>
        <button class="button-link" onclick="copyRSS()">Copy</button>
      </div>
      <p class="small muted">Use this RSS in your favorite podcast app. Apple/Spotify links can be added once directories approve the show.</p>
      <div class="top-cta" style="margin-top:.75rem">
        <a class="chip" id="spotifyLink" href="#" target="_blank">Spotify</a>
        <a class="chip" id="appleLink" href="#" target="_blank">Apple Podcasts</a>
      </div>
    </div>
  </div>

  <!-- ABOUT -->
  <div id="about" class="tab-content">
    <h2>What is Prompt Science?</h2>
    <div class="section">
      <p><strong>Prompt Science</strong> is a podcast where large language models help draft scripts from recent, high-quality sources, and the community reviews, corrects, and enriches them. Every episode documents the models used, prompts, and references, so the process is transparent and reproducible.</p>
      <p>Episodes are generated with AI, reviewed by humans, and published with <span class="pill">sources</span>, <span class="pill">transcripts</span>, and <span class="pill">version history</span>. When the script updates, the audio is regenerated and a new version is published.</p>
    </div>
    <div class="section">
      <details>
        <summary>Typical episode pipeline</summary>
        <ul>
          <li>Collect recent items from top venues (Nature, Science, arXiv, institutional newsrooms).</li>
          <li>Draft a script with LLMs (tone: clear, curious, neutral American narration).</li>
          <li>Human review: fact-check, adjust dates, add author names and citations.</li>
          <li>Text-to-speech renders the final audio; MP3 is stored in <span class="kbd">/episodes</span>.</li>
          <li>Publish to GitHub Pages, update RSS, announce.</li>
        </ul>
      </details>
    </div>
  </div>

  <!-- HOW IT WORKS -->
  <div id="how" class="tab-content">
    <h2>How it works</h2>
    <div class="section">
      <p><strong>Generation:</strong> LLMs draft the episode from recent sources with explicit prompts and guardrails.</p>
      <p><strong>Verification:</strong> Contributors open Pull Requests to correct facts, add context, or improve clarity. All changes are version-controlled.</p>
      <p><strong>Reproduction:</strong> We track model names, versions, and prompts so episodes can be regenerated deterministically where possible.</p>
    </div>
    <div class="section">
      <details>
        <summary>Files and structure</summary>
        <pre class="small">
episodes/
  2025-10-05-navier-stokes.mp3
  2025-10-05-navier-stokes.md     ‚Üê transcript
  episodes.json                   ‚Üê optional index
assets/
  cover.png
feeds/
  podcast.rss                     ‚Üê your RSS feed
index.html
        </pre>
      </details>
    </div>
  </div>

  <!-- CONTRIBUTE -->
  <div id="contribute" class="tab-content">
    <h2>Contribute</h2>
    <div class="section">
      <p>Spotted an error? Want to add a paper or clarify a claim? Contribute on GitHub with a Pull Request. Edit the transcript Markdown, update references, or add a new episode card to <span class="kbd">episodes/episodes.json</span>.</p>
      <a id="repoLink" class="button-link" href="#" target="_blank">Open GitHub Repository</a>
    </div>
    <div class="section">
      <details>
        <summary>How to add a new episode</summary>
        <ol>
          <li>Add the MP3 to <span class="kbd">/episodes</span>.</li>
          <li>Add a transcript <span class="kbd">.md</span> with references.</li>
          <li>Append an entry to <span class="kbd">episodes/episodes.json</span> with title, date, duration, and file paths.</li>
          <li>Open a Pull Request. A maintainer merges after quick checks.</li>
        </ol>
      </details>
    </div>
  </div>

  <!-- SUBMIT CORRECTIONS -->
  <div id="submit" class="tab-content">
    <h2>Submit corrections</h2>
    <div class="section">
      <p>Prefer not to use GitHub? Send corrections or sources by email. Include the episode title, the exact sentence, and a reliable citation.</p>
      <p>üì¨ <strong><a id="emailLink" href="mailto:scienceprompt@gmail.com">scienceprompt@gmail.com</a></strong></p>
    </div>
    <div class="section">
      <details>
        <summary>Minimal checklist for corrections</summary>
        <ul>
          <li>Concrete reference (DOI, arXiv, Nature/Science URL).</li>
          <li>Accurate dates and author names.</li>
          <li>Direct quote or paraphrase with citation.</li>
          <li>If adding numbers, show how they were computed.</li>
        </ul>
      </details>
    </div>
  </div>

  <!-- CONTACT -->
  <div id="contact" class="tab-content">
    <h2>Contact</h2>
    <p>üì¨ Email: <code>scienceprompt@gmail.com</code></p>
    <p class="small muted">We‚Äôre preparing Apple/Spotify listings; links will appear here once approved.</p>
  </div>
</div>

<footer>
  &copy; 2025 Prompt Science ¬∑ Audio & text licensed under CC BY 4.0
</footer>

<script>
  // ====== CONFIG: set these to your own values ======
  const GITHUB_REPO = "https://github.com/napoles-uach/promptscience";
  const RSS_URL     = "https://github.com/napoles-uach/promptscience/feeds/podcast.rss";
  const SPOTIFY_URL = "#";  // add once approved
  const APPLE_URL   = "#";  // add once approved

  // Fallback if episodes/episodes.json is absent:
  const FALLBACK_EPISODES = [
    {
      id: "2025-10-05-navier-stokes",
      title: "Special: DeepMind, Navier‚ÄìStokes, and the Millennium Problem",
      date: "2025-10-05",
      duration: "11:45",
      audio: "episodes/2025-10-05-navier-stokes.mp3",
      transcript: "episodes/2025-10-05-navier-stokes.md",
      description: "How AI-assisted mathematics is exploring one of the hardest open problems in fluid dynamics."
    },
    {
      id: "2025-10-03-weekly",
      title: "Weekly: Materials, Biosecurity, and Autonomous Labs",
      date: "2025-10-03",
      duration: "10:07",
      audio: "episodes/2025-10-03-weekly.mp3",
      transcript: "episodes/2025-10-03-weekly.md",
      description: "A tour through recent AI-in-science highlights and why they matter."
    }
  ];
  // ================================================

  // Wire header buttons
  document.getElementById('repoLinkTop').href = GITHUB_REPO;
  document.getElementById('repoLink').href    = GITHUB_REPO;
  document.getElementById('rssLinkTop').href  = RSS_URL;
  document.getElementById('rssLink').href     = RSS_URL;
  document.getElementById('spotifyLink').href = SPOTIFY_URL;
  document.getElementById('appleLink').href   = APPLE_URL;
  document.getElementById('rssValue').textContent = RSS_URL;

  function copyRSS(){
    navigator.clipboard.writeText(RSS_URL);
    alert("RSS link copied!");
  }

  // Tabs
  function openTab(tabId) {
    const tabs = document.querySelectorAll('.tab-content');
    const buttons = document.querySelectorAll('.tab-buttons button');
    tabs.forEach(tab => tab.classList.remove('active'));
    buttons.forEach(btn => btn.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    // find the button that triggers this id and set active
    buttons.forEach(b=>{
      if (b.getAttribute('onclick') && b.getAttribute('onclick').includes(`'${tabId}'`)) b.classList.add('active');
    });
  }
  window.openTab = openTab; // expose for inline onclick

  // Load episodes.json if present, otherwise use fallback
  async function loadEpisodes(){
    try {
      const res = await fetch('episodes/episodes.json', { cache: 'no-store' });
      if (!res.ok) throw new Error('no episodes.json');
      const data = await res.json();
      renderEpisodes(Array.isArray(data) ? data : data.episodes);
    } catch {
      renderEpisodes(FALLBACK_EPISODES);
    }
  }

  function renderEpisodes(items){
    const container = document.getElementById('episodes');
    container.innerHTML = "";
    if (!items || !items.length) {
      container.innerHTML = "<p>No episodes yet. Add MP3 files to <span class='kbd'>/episodes</span>.</p>";
      return;
    }
    // sort newest first
    items.sort((a,b)=> new Date(b.date) - new Date(a.date));
    items.forEach(ep=>{
      const card = document.createElement('div');
      card.className = 'episode-card';
      card.innerHTML = `
        <h3>${escapeHTML(ep.title || "Untitled Episode")}</h3>
        <div class="meta">${escapeHTML(ep.date || "")} ¬∑ ${escapeHTML(ep.duration || "")}</div>
        <p class="small">${escapeHTML(ep.description || "")}</p>
        <audio controls preload="none">
          <source src="${escapeAttr(ep.audio)}" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
        <div>
          ${ep.transcript ? `<a class="button-link" href="${escapeAttr(ep.transcript)}" target="_blank">Transcript</a>` : ""}
          ${ep.refs ? `<a class="button-link" href="${escapeAttr(ep.refs)}" target="_blank">References</a>` : ""}
        </div>
      `;
      container.appendChild(card);
    });
  }
  function escapeHTML(s){ return (s||"").replace(/[&<>"']/g, m=>({ "&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#039;" }[m])); }
  function escapeAttr(s){ return (s||"").replace(/"/g, '&quot;'); }

  // Background animation
  const canvas = document.getElementById('background');
  const ctx = canvas.getContext('2d');
  let nodes = [];
  function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
  window.addEventListener('resize', resize); resize();
  function initNodes(count) {
    nodes = [];
    for (let i = 0; i < count; i++) {
      nodes.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        vx: (Math.random() - 0.5) * 0.5,
        vy: (Math.random() - 0.5) * 0.5
      });
    }
  }
  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    nodes.forEach(n => {
      ctx.beginPath(); ctx.arc(n.x, n.y, 2, 0, Math.PI * 2);
      ctx.fillStyle = "rgba(56,189,248,1.0)"; ctx.fill();
    });
    for (let i = 0; i < nodes.length; i++) {
      for (let j = i + 1; j < nodes.length; j++) {
        const a = nodes[i], b = nodes[j];
        const dx = a.x - b.x, dy = a.y - b.y;
        const dist = Math.sqrt(dx * dx + dy * dy);
        if (dist < 120) {
          ctx.beginPath(); ctx.moveTo(a.x, a.y); ctx.lineTo(b.x, b.y);
          ctx.strokeStyle = "rgba(56,189,248," + ((1 - dist / 120) * 0.3) + ")";
          ctx.stroke();
        }
      }
    }
  }
  function update() {
    nodes.forEach(n => {
      n.x += n.vx; n.y += n.vy;
      if (n.x < 0 || n.x > canvas.width) n.vx *= -1;
      if (n.y < 0 || n.y > canvas.height) n.vy *= -1;
    });
  }
  function animate() { draw(); update(); requestAnimationFrame(animate); }
  initNodes(60); animate();

  // boot
  loadEpisodes();
</script>

</body>
</html>
